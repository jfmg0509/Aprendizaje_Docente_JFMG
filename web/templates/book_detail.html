{{define "book_detail"}}
<h1>Detalle del libro</h1>

<div class="card">
  <p><b>ID:</b> {{.Data.Book.ID}}</p>
  <p><b>Título:</b> {{.Data.Book.Title}}</p>
  <p><b>Autor:</b> {{.Data.Book.Author}}</p>
  <p><b>Año:</b> {{.Data.Book.Year}}</p>
  <p><b>ISBN:</b> {{.Data.Book.ISBN}}</p>
  <p><b>Categoría:</b> {{.Data.Book.Category}}</p>
  <p><b>Tags:</b> {{range .Data.Book.Tags}}{{.}} {{end}}</p>
  <p><b>Descripción:</b> {{.Data.Book.Description}}</p>
</div>

<div class="grid" style="margin-top:16px">
  <div class="card">
    <h3>Registrar acceso</h3>
    <form method="post" action="/ui/access">
      <input type="hidden" name="book_id" value="{{.Data.Book.ID}}" />
      <label>User ID</label><input name="user_id" type="number" required />
      <label>Tipo de acceso</label>
      <select name="access_type">
        {{range .Data.AccessTypes}}<option value="{{.}}">{{.}}</option>{{end}}
      </select>
      <button type="submit">Registrar</button>
    </form>
    <p class="muted">Se registra en cola (canal) y se inserta asíncronamente.</p>
  </div>

  <div class="card">
    <h3>Estadísticas</h3>
    <ul>
      <li>APERTURA: {{index .Data.Stats "APERTURA"}}</li>
      <li>LECTURA: {{index .Data.Stats "LECTURA"}}</li>
      <li>DESCARGA: {{index .Data.Stats "DESCARGA"}}</li>
    </ul>
  </div>
</div>
{{end}}
